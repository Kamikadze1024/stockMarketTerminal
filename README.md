# stockMarketTerminal
Simple stock market terminal example

Это простой, консольный эмулятор терминала криптобиржи.

Постановка задачи:
Нужно получать данные с крипто-биржи binance или kraken для пары btc/usdt (bitcoin/usd tether)
поток orderbook в специфическом для биржи формате (обновления json),
преобразовывать во внутреннюю структуру из ask и bids, содержащую время
последнего обновления и набор элементов вида <double price, double amount>.

Правила замены и удаления элементов из списка описаны по ссылке:
https://binance-docs.github.io/apidocs/spot/en/#diff-depth-stream

Работа с вэбсокетом не реализована ради упрощения, данные можно взять из
файла binance. Два первых поля (timestamp и имя валютной пары) выкидываются
внешним обработчиком (awk, cut, ...), чтобы не загружать программу лишней функциональностью.

Программа получает данные на stdin оптимальным по быстродействию способом,
выводит содержимое ask/bids по сигналу USR1 в виде:
{"a": [[price,amount],[price,amount],[price],[amount]....], "b":[[price,amount],[price,amount],...]}
 
В случае, если ask (поле "a") идёт первым, данные в обоих масивах при выводе отсортированы по убыванию,
если bid ("b") -- то по возрастанию. Порядок вывода задаётся ключами вызова программы (например, -r).
Также параметром вызова программы можно задать максимальную глубину хранения от 10 до бесконечности.

Json парсится посредствам boost.

Запускать cat binance | cut -d ' ' -f3 | ./FinTechInstr

Замеченные проблемы:
- Программа реагирует на Ctrl+C с большим опозданием
- В процессе чтения файла загружает процессор на 200%
- Программа продолжает работать при закрытии потока данных на входе

